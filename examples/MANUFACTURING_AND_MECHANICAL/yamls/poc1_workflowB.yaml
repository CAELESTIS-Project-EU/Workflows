workflow_type: WORKFLOWS.AUTOMATION_ML.workflowB.execution
phases:
  Sampling:
    - Type: PHASES.SAMPLERS.CSV.run
      parameters:
        inputs_file: "{parameters.inputs_file}"
  Prepare Data:
    - Type: PHASES.BEFORESIMULATION.alya.USECASEconvert_and_surrogate
      parameters:
        DoE_line: "{variables.DoE_line}"
        input_files_folder: "{variables.results_folder}/{variables.line_number}/Distortion/"
        output_files_folder: "{variables.simulation_wdir}/{variables.line_number}/Mechanical/"
        row_folder: "{variables.simulation_wdir}/{variables.line_number}/"
        Mechanical_Base_Name: "{parameters.Mechanical_Base_Name}"
        template_COUPONtool: "{parameters.template_COUPONtool}"
        lperm_path: "{parameters.lperm_path}"
        inp_path: "{parameters.inp_path}"
        voids_path: "{parameters.voids_path}"
  ALYA_Simulation:
    - Type: PHASES.SIMULATIONS.alya.simulation
      parameters:
        simulation_wdir: "{variables.simulation_wdir}/{variables.line_number}/Mechanical/{parameters.Mechanical_Base_Name}"
        name_sim: "{parameters.Mechanical_Base_Name}"
  ALYA_PostProcess:
    - Type: PHASES.POSTSIMULATION.alya.collect_results
      parameters:
        simulation_wdir: "{variables.simulation_wdir}/{variables.line_number}/Mechanical/{parameters.Mechanical_Base_Name}"
        name_sim: "{parameters.Mechanical_Base_Name}"
outputs: {}
inputs: {}
parameters:
  machine: HPCBSC
  macros_folder: /gpfs/projects/bsce81/workflow_POC1_debug_bsc/esi_src
  inputs_file: /gpfs/projects/bsce81/workflow_POC1_debug_bsc/001_Data/generatedDOEtwolines.csv
  source_folder: /gpfs/projects/bsce81/workflow_POC1_debug_bsc/001_Data/input
  lperm_path: /gpfs/scratch/bsce81/doe-poc1-11samples
  voids_path: /gpfs/scratch/bsce81/doe-poc1-11samples
  inp_path: /gpfs/scratch/bsce81/doe-poc1-11samples
  template_COUPONtool: /gpfs/scratch/bsc21/bsc021946/CAELESTIS/full-workflow/Workflows/examples/MANUFACTURING_AND_MECHANICAL/inputs/template_inputs_USECASEconvert_poc1.yaml
  RTM_base_name: CAELESTIS
  Curing_base_name: CAELESTIS
  Distortion_Base_Name: CAELESTISD
  Mechanical_Base_Name: poc1
  PAM_NP: "24"
